var userContainer = document.getElementById("user-container<%= @detail_id %>");

<% @users.each do |user| %>
  var existingUserNames = Array.from(userContainer.getElementsByTagName("p")).map(function(paragraph) {
    return paragraph.textContent.trim();
  });

  if (!existingUserNames.includes("<%= user.username %>")) {
    var userParagraph = document.createElement("p");
    userParagraph.textContent = "<%= user.username %>";
    userContainer.appendChild(userParagraph);
  }
<% end %>

var searchInput = document.getElementById("search-input<%= @detail_id %>");
searchInput.value = "";
